# Notion CLI

[![Build](https://github.com/postmanlabs/postman-code-examples/actions/workflows/notion-cli.yml/badge.svg)](https://github.com/postmanlabs/postman-code-examples/actions/workflows/notion-cli.yml)

A command-line tool for reading and writing to Notion workspaces ‚Äî built for humans and AI agents alike. Built on the latest Notion API (`2025-09-03`), including data sources, file uploads, page moves, and OAuth. Search pages, navigate database schemas, read and update content, upload files, and manage comments, all from the terminal.

### What you can do

- **Search** across your workspace by keyword, filtered to pages, databases, or both, with sort direction control
- **Read pages** with full content ‚Äî blocks are fetched recursively and rendered with structure intact (headings, lists, toggles, callouts, code blocks, and more)
- **Navigate databases** ‚Äî view the schema, data sources, and entries with all their property values
- **Work with data sources directly** ‚Äî retrieve, query, update, and list templates for the data source layer underneath databases
- **Write back** ‚Äî create pages, update titles, move pages between parents, append content blocks, edit block text, archive what you don't need
- **Manage comments** ‚Äî list threads, retrieve individual comments, add comments, reply to discussions
- **Upload files** ‚Äî upload local files to Notion, list uploads, and retrieve upload status
- **Two auth methods** ‚Äî internal integration tokens for simplicity, or full OAuth browser flow for public integrations, with token introspection and revocation
- **Map a workspace** ‚Äî `integration pages` finds the roots, `page get` reveals children ‚Äî compose them to walk the full content tree
- **Great for humans and agents** ‚Äî default output is human-readable and token-efficient; `--raw` gives agents the full JSON when they need it. A built-in `docs` command and navigation hints between related commands let an AI agent explore a workspace without prior knowledge

## How it was made

This project was built by a human and an AI coding agent working together ü§ù. The agent used [Postman Code](https://www.postman.com/explore/code)'s MCP tools to search for the Notion API on Postman's API Network, pull request definitions from the [Notion API Collection](https://www.postman.com/notionhq/notion-s-api-workspace/collection/a1b2c3d/notion-api), and generate a typed TypeScript function for each endpoint. Every API call is a direct API integration ‚Äî no HTTP code was written by hand and no third-party dependencies were introduced.

The **command layer** was designed collaboratively. The human defined the command hierarchy, output format, and the behaviors that make the CLI useful beyond raw API access ‚Äî the agent implemented them. Commands aren't thin wrappers around the generated clients; they add real workflow logic:

- `page get` recursively fetches nested blocks in parallel and renders 20+ block types with depth-aware indentation
- `integration pages` derives the concept of "root pages" (which doesn't exist in the Notion API) by paginating all visible pages and filtering by parent visibility
- `block update` fetches the block first to determine its type, validates that it supports text updates, then sends the correctly-keyed payload
- Property formatting handles 15+ Notion property types (select, multi_select, date, formula, rollup, relation, etc.)
- Every command includes detailed `--help` text with usage examples and navigation hints between related commands

The generated clients handle all the HTTP details. The commands handle workflow ‚Äî composing API calls, adding derived concepts, and formatting output for readability.

## How it works

The API clients under `src/postman/notion-api/` were generated by Postman Code. The [Notion API (2025-09-03)](https://www.postman.com/notionhq/notion-s-api-workspace/collection/a1b2c3d/notion-api) collection is the source of truth ‚Äî Postman Code reads a request from the collection and produces a type-safe TypeScript function. Each request becomes its own `client.ts` file.

Those generated clients are re-exported through an `index.ts` file that namespaces them by resource.

```typescript
import { createNotionClient } from "./src/postman/notion-api/index.js";

const notion = createNotionClient(token);

// Search across the workspace
const results = await notion.search({
  query: "meeting notes",
  filter: { value: "page", property: "object" },
  sort: { direction: "descending", timestamp: "last_edited_time" },
});

// Retrieve a database schema and list its entries via data sources
const schema = await notion.databases.retrieve(databaseId);
const dataSourceId = schema.data_sources?.[0]?.id;
const entries = await notion.dataSources.query(dataSourceId, {
  page_size: 50,
});

// Read a page and its content blocks
const page = await notion.pages.retrieve(pageId);
const blocks = await notion.blocks.retrieveChildren(pageId);
```

All types are also exported from the same entry point:

```typescript
import { createNotionClient, type NotionPage, type NotionDatabase } from "./src/postman/notion-api/index.js";
```

The CLI commands in `commands/` use these clients and add the workflow logic described above ‚Äî recursive traversal, derived concepts, multi-step orchestration, and rich output formatting.

Each command uses one or more Postman Collection requests ‚Äî the same requests Postman Code used to generate the client code:

| Command | Collection Requests Used | Generated Clients |
|---------|------------------------|-----------------|
| `search` | [Search](https://go.postman.co/request/52041987-0e8a4f2d-d453-4bc1-b4c6-286905b87f4a) | [search](src/postman/notion-api/search/search/client.ts) |
| `integration pages` | [Search](https://go.postman.co/request/52041987-0e8a4f2d-d453-4bc1-b4c6-286905b87f4a) (paginated) | [search](src/postman/notion-api/search/search/client.ts) |
| `page get` | [Retrieve a page](https://go.postman.co/request/52041987-d7e520f6-0c75-4fe0-9b23-990f742d496e)<br>[Retrieve block children](https://go.postman.co/request/52041987-039ea5be-709a-4539-b021-170a63eba771) | [retrieve-page](src/postman/notion-api/pages/retrieve-page/client.ts)<br>[retrieve-block-children](src/postman/notion-api/blocks/retrieve-block-children/client.ts) |
| `page create` | [Create a page](https://go.postman.co/request/52041987-a2ef9963-62e0-4e87-a12b-f899f695280c) | [create-page](src/postman/notion-api/pages/create-page/client.ts) |
| `page update` | [Update page properties](https://go.postman.co/request/52041987-de2726f0-1465-4fdc-81d5-bd35415848b4) | [update-page-properties](src/postman/notion-api/pages/update-page-properties/client.ts) |
| `page archive` | [Update page properties](https://go.postman.co/request/52041987-de2726f0-1465-4fdc-81d5-bd35415848b4) | [archive-page](src/postman/notion-api/pages/archive-page/client.ts) |
| `page property` | [Retrieve a page property item](https://go.postman.co/request/52041987-e3c019ad-9c8b-4975-a142-5549ef771028) | [retrieve-page-property](src/postman/notion-api/pages/retrieve-page-property/client.ts) |
| `page move` | [Move page](https://go.postman.co/request/52041987-9686de7b-77c0-4d53-b800-bf6c748bc668) | [move-page](src/postman/notion-api/pages/move-page/client.ts) |
| `database get` | [Retrieve a database](https://go.postman.co/request/52041987-73359528-2278-415f-98f2-4d20274cc69e) | [retrieve-database](src/postman/notion-api/databases/retrieve-database/client.ts) |
| `database create` | [Create a database](https://go.postman.co/request/52041987-85ab373b-2fc1-4b9a-a8a6-ee6b9e72728c) | [create-database](src/postman/notion-api/databases/create-database/client.ts) |
| `database update` | [Update a database](https://go.postman.co/request/52041987-5febd2f6-c9ff-486d-8a4b-71e5c58f82ef) | [update-database](src/postman/notion-api/databases/update-database/client.ts) |
| `datasource get` | [Retrieve a data source](https://go.postman.co/request/52041987-dfeeac14-f85e-4527-ad2e-d85f79284dd9) | [retrieve-data-source](src/postman/notion-api/data-sources/retrieve-data-source/client.ts) |
| `datasource query` | [Query a data source](https://go.postman.co/request/52041987-aa498c21-f7e7-4839-bbe7-78957fb7379d) | [query-data-source](src/postman/notion-api/data-sources/query-data-source/client.ts) |
| `datasource create` | [Create a data source](https://go.postman.co/request/52041987-9c41977a-1606-4c76-a4e0-d094a3d0b4c7) | [create-data-source](src/postman/notion-api/data-sources/create-data-source/client.ts) |
| `datasource update` | [Update a data source](https://go.postman.co/request/52041987-29f06253-bd7e-4c3c-b0d8-a36b285c4e0e) | [update-data-source](src/postman/notion-api/data-sources/update-data-source/client.ts) |
| `datasource templates` | [List data source templates](https://go.postman.co/request/52041987-f38c907f-36d5-40c7-b057-e4811b4b5cde) | [list-data-source-templates](src/postman/notion-api/data-sources/list-data-source-templates/client.ts) |
| `block get` | [Retrieve a block](https://go.postman.co/request/52041987-30ea7fcd-b8b4-441f-935a-c9d143d59d66) | [retrieve-block](src/postman/notion-api/blocks/retrieve-block/client.ts) |
| `block children` | [Retrieve block children](https://go.postman.co/request/52041987-039ea5be-709a-4539-b021-170a63eba771) | [retrieve-block-children](src/postman/notion-api/blocks/retrieve-block-children/client.ts) |
| `block append` | [Append block children](https://go.postman.co/request/52041987-a9376866-eb97-4cfa-b08d-5fc49f09ef26) | [append-block-children](src/postman/notion-api/blocks/append-block-children/client.ts) |
| `block update` | [Retrieve a block](https://go.postman.co/request/52041987-30ea7fcd-b8b4-441f-935a-c9d143d59d66)<br>[Update a block](https://go.postman.co/request/52041987-1a96de40-de2c-49c8-9697-fc91b077d06d) | [retrieve-block](src/postman/notion-api/blocks/retrieve-block/client.ts)<br>[update-block](src/postman/notion-api/blocks/update-block/client.ts) |
| `block delete` | [Delete a block](https://go.postman.co/request/52041987-95e3f732-e993-42b4-8451-70178b3d2ac9) | [delete-block](src/postman/notion-api/blocks/delete-block/client.ts) |
| `comment list` | [Retrieve comments](https://go.postman.co/request/52041987-4def4425-319e-418c-9d96-56a4807a8ce7) | [retrieve-comments](src/postman/notion-api/comments/retrieve-comments/client.ts) |
| `comment get` | [Retrieve a comment](https://go.postman.co/request/52041987-2f312153-d16c-459b-9d51-88358a96fe03) | [retrieve-comment](src/postman/notion-api/comments/retrieve-comment/client.ts) |
| `comment add` | [Create a comment](https://go.postman.co/request/52041987-9261f5ec-6b04-4d13-83a0-d12fe1b188c7) | [add-comment-to-page](src/postman/notion-api/comments/add-comment-to-page/client.ts) |
| `comment reply` | [Create a comment](https://go.postman.co/request/52041987-9261f5ec-6b04-4d13-83a0-d12fe1b188c7) | [add-comment-to-discussion](src/postman/notion-api/comments/add-comment-to-discussion/client.ts) |
| `file upload` | [Create a file upload](https://go.postman.co/request/52041987-1548ae35-ac12-4fc3-a337-416ed2a92088)<br>[Send file upload](https://go.postman.co/request/52041987-aaf29c9a-7236-432d-97e8-beebee88b3cd)<br>[Complete file upload](https://go.postman.co/request/52041987-80549896-30b1-43a4-add0-a73958b602e1) | [create-file-upload](src/postman/notion-api/file-uploads/create-file-upload/client.ts)<br>[send-file-upload](src/postman/notion-api/file-uploads/send-file-upload/client.ts)<br>[complete-file-upload](src/postman/notion-api/file-uploads/complete-file-upload/client.ts) |
| `file list` | [List file uploads](https://go.postman.co/request/52041987-d6b82f81-aaf2-4cc0-b92c-c8cdf709e67d) | [list-file-uploads](src/postman/notion-api/file-uploads/list-file-uploads/client.ts) |
| `file get` | [Retrieve a file upload](https://go.postman.co/request/52041987-2f30fd9c-c12b-40fc-bb98-03d153c3e353) | [retrieve-file-upload](src/postman/notion-api/file-uploads/retrieve-file-upload/client.ts) |
| `user me` | [Retrieve your token's bot user](https://go.postman.co/request/52041987-30ad8b7b-5eb0-4bbe-bfbf-509d7f961cae) | [retrieve-bot-user](src/postman/notion-api/users/retrieve-bot-user/client.ts) |
| `user get` | [Retrieve a user](https://go.postman.co/request/52041987-e23bf76f-cb3a-4bbc-9e5a-0a39cd59e909) | [retrieve-user](src/postman/notion-api/users/retrieve-user/client.ts) |
| `user list` | [List all users](https://go.postman.co/request/52041987-1f6b9bec-dc7d-4412-9e80-46a33b8b11c6) | [list-users](src/postman/notion-api/users/list-users/client.ts) |
| `auth-public login` | [Token](https://go.postman.co/request/52041987-ced3cc2e-170e-40fa-8f39-fee0f6a464d7) | [token](src/postman/notion-api/oauth/token/client.ts) |
| `auth-public introspect` | [Introspect](https://go.postman.co/request/52041987-3070c020-0b6d-402f-bd18-88e9e1348521) | [introspect](src/postman/notion-api/oauth/introspect/client.ts) |
| `auth-public revoke` | [Revoke](https://go.postman.co/request/52041987-2e4a8940-5ef0-42b2-9c3c-d56c1752e9ac) | [revoke](src/postman/notion-api/oauth/revoke/client.ts) |

Each generated client file embeds the collection and request IDs in its header, along with the last-modified timestamp:

```typescript
/**
 * Generated by Postman Code
 *
 * Collection: Notion API (2025-09-03)
 * Collection UID: 52041987-03f70d8f-b6e5-4306-805c-f95f7cdf05b9
 *
 * Request: Search > Search
 * Request UID: 52041987-0e8a4f2d-d453-4bc1-b4c6-286905b87f4a
 * Request modified at: 2022-02-24T23:01:58.000Z
 */
```

This means that if the Postman Collection request changes, the change can be detected by Postman Code and client code re-regenerated.

## Getting Started

### 1. Clone and Install

```bash
git clone https://github.com/postmanlabs/postman-code-examples.git
cd postman-code-examples/notion-cli
npm install
```

### 2. Make the `notion-cli` Command Available

This project isn't published to npm (yet), so use `npm link` to make the `notion-cli` command available globally on your machine:

```bash
npm link
```

This builds the project and creates a symlink so you can run `notion-cli` from anywhere. To remove it later, run `npm unlink -g notion-cli`.

### 3. Set Up a Notion Integration

Notion supports two types of integrations. Choose one:

- **Internal** (recommended) ‚Äî simpler setup, uses a static token. Good for personal use or accessing your own workspace.
- **Public** (OAuth) ‚Äî uses a browser-based authorization flow. Needed when other Notion users need to install your integration into their own workspaces.

#### Internal integration

1. Go to [notion.so/my-integrations](https://www.notion.so/my-integrations)
2. Click "New integration" and choose **Internal**
3. Give it a name (e.g., "notion-cli")
4. Select the workspace you want to access
5. Under "Capabilities", enable "Read content"
6. Click "Submit" and copy the "Internal Integration Secret"

Share pages with your integration ‚Äî internal integrations can only access pages that have been explicitly shared with them:

1. Open a page or database in Notion
2. Click the `‚Ä¢‚Ä¢‚Ä¢` menu in the top right
3. Select "Add connections"
4. Find and select your integration

> **Tip**: Share a top-level page to give access to all its children.

Save your integration token:

```bash
notion-cli auth-internal set
```

This prompts for your token with masked input and stores it in `~/.notion-cli/config.json`. You can also pass the token directly (`notion-cli auth-internal set <token>`) or set the `NOTION_TOKEN` environment variable, which takes precedence over the stored token.

Run `notion-cli auth-internal status` to check your current authentication state.

#### Public integration (OAuth)

1. Go to [notion.so/my-integrations](https://www.notion.so/my-integrations)
2. Click "New integration" and choose **Public**
3. Give it a name and configure the required fields
4. Set the redirect URI to `http://localhost:8787/callback`
5. Copy the **OAuth client ID** and **OAuth client secret** from the integration settings

Save your OAuth client credentials:

```bash
notion-cli auth-public setup
```

This prompts for your client ID and client secret (masked) and stores them in `~/.notion-cli/config.json`.

Then run the OAuth login flow:

```bash
notion-cli auth-public login
```

This opens your browser for Notion authorization. During authorization, the user selects which pages to share with the integration ‚Äî no manual sharing step is needed. The CLI runs a local server to handle the callback, exchanges the authorization code for an access token, and stores it automatically.

Run `notion-cli auth-public status` to check your current authentication state.

## Usage

Every command can produce two kinds of output:

- **Default (formatted)** ‚Äî a human-readable, token-efficient summary. Property values are labeled, blocks are indented by depth, and only the most useful fields are shown. This is what you see in the examples below.
- **Raw (`--raw` / `-r`)** ‚Äî the full API response as JSON, exactly as Notion returned it. Use this when piping into other tools, when an AI agent needs complete data, or when the formatted view doesn't include a field you need.

### search

Search for pages and databases:

```bash
# List pages the integration can access (via the Search API)
notion-cli search

# Search by keyword
notion-cli search "meeting notes"

# Search for databases instead of pages
notion-cli search --filter database

# Show both pages and databases
notion-cli search --filter all

# Limit results
notion-cli search -n 5

# Sort by last edited time (ascending = oldest first, descending = newest first)
notion-cli search --direction descending
notion-cli search -d asc
```

By default, search returns pages only. Use `--filter database` to find databases, or `--filter all` to show both. Use `--direction` to sort results by last edited time (`ascending` or `descending`; shorthand `asc`/`desc` also works). The sort field defaults to `last_edited_time` ‚Äî the only value currently documented by Notion ‚Äî but `--sort-by` can override it if new options become available. Results are paginated ‚Äî use `--cursor` with the cursor from the previous response to fetch the next page.

Example:

```
$ notion-cli search "AI Pilot" -n 2
üîç Searching pages for "AI Pilot"...

Found 2 result(s):

  üìÑ AI Pilot Retrospective
     ID: d4e5f6a7-b8c9-0123-defa-234567890123
     Parent: page (ID: a1b2c3d4-5e6f-7890-abcd-ef1234567890)
     Created: 2/12/2026
     Last edited: 2/12/2026
     Archived: false
     URL: https://www.notion.so/AI-Pilot-Retrospective-d4e5f6a7b8c90123defa234567890123

  üìÑ Emergency Rollback Procedures
     ID: e4f5a6b7-c8d9-0123-efab-345678901234
     Parent: page (ID: a1b2c3d4-5e6f-7890-abcd-ef1234567890)
     Created: 1/15/2026
     Last edited: 2/10/2026
     Archived: false
     URL: https://www.notion.so/Emergency-Rollback-Procedures-e4f5a6b7c8d90123efab345678901234
```

### integration pages

List the root pages the integration can access:

```bash
notion-cli integration pages
```

Returns the entry points for navigating workspace content. A page is considered a root if its parent is the workspace itself, or if its parent page isn't visible to the integration (meaning the integration was shared with a nested page directly). This is the recommended starting point for mapping a workspace ‚Äî the command paginates through all pages internally and does the filtering, so agents don't need to figure out which pages are roots themselves.

Example:

```
$ notion-cli integration pages
üîç Finding root pages...

Found 3 root page(s) (scanned 42 total):

  üìÑ AI Adoption Plan
     ID: a1b2c3d4-5e6f-7890-abcd-ef1234567890
     Created: 6/15/2025
     Last edited: 2/12/2026
     URL: https://www.notion.so/AI-Adoption-Plan-a1b2c3d45e6f7890abcdef1234567890

  üìÑ Prompt Engineering for Managers
     ID: b2c3d4e5-f6a7-8901-bcde-f12345678901
     Created: 8/1/2025
     Last edited: 2/10/2026
     URL: https://www.notion.so/Prompt-Engineering-for-Managers-b2c3d4e5f6a78901bcdef12345678901

  üìÑ Things the AI Broke
     ID: c3d4e5f6-a7b8-9012-cdef-123456789012
     Created: 3/20/2025
     Last edited: 1/28/2026
     URL: https://www.notion.so/Things-the-AI-Broke-c3d4e5f6a7b89012cdef123456789012
```

### page

Read and manage Notion pages.

#### page get

Read a page's content:

```bash
notion-cli page get <page-id>
```

Shows page metadata (title, ID, parent, dates, URL), all properties, and content blocks with formatting. Child pages and databases are listed with their IDs for further navigation. The command recursively fetches nested blocks (toggles, callouts, etc.) but stops at child pages and databases.

Example:

```
$ notion-cli page get d4e5f6a7-b8c9-0123-defa-234567890123
üìÑ Fetching page...

Title: AI Pilot Retrospective
ID: d4e5f6a7-b8c9-0123-defa-234567890123
Parent: page (ID: a1b2c3d4-5e6f-7890-abcd-ef1234567890)
Created: 2/12/2026
Last edited: 2/12/2026
Archived: false
URL: https://www.notion.so/AI-Pilot-Retrospective-d4e5f6a7b8c90123defa234567890123

Properties (1):
  title: AI Pilot Retrospective

Content (2 blocks):

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
The AI pilot went mostly well. Marketing loved the generated content. Legal has questions. The chatbot told three customers we offer free shipping to Mars.
Action item: add guardrails before the next demo with the board. Seriously.
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
```

#### page create

Create a new page under a parent page:

```bash
notion-cli page create <parent-page-id> --title "My New Page"

# Create under a database parent
notion-cli page create <database-id> --title "New Entry" --database
```

Example:

```
$ notion-cli page create d4e5f6a7-b8c9-0123-defa-234567890123 --title "Lessons Learned"
Page created.
  Title: Lessons Learned
  ID: d9e0f1a2-b3c4-5678-defa-890123456789
  URL: https://www.notion.so/Lessons-Learned-d9e0f1a2b3c45678defa890123456789
```

#### page update

Update a page's title, property values, icon, or cover image:

```bash
notion-cli page update <page-id> --title "New Title"
```

Set typed property values with `--set` (`-s`). Format: `"Name:type:value"`:

```bash
# Set text, number, and select properties
notion-cli page update <page-id> -s "Blamed On:rich_text:Chatbot" -s "Severity:select:High"

# Multi-select (comma-separated values)
notion-cli page update <page-id> -s "Tags:multi_select:Hallucination,Customer-Facing,Urgent"
```

Supported types: `rich_text`, `number`, `select`, `multi_select`, `date`, `checkbox`, `url`, `email`, `phone_number`.

Set the page icon (emoji) or cover image (external URL):

```bash
# Set icon and cover
notion-cli page update <page-id> --icon üé∏
notion-cli page update <page-id> --cover "https://images.unsplash.com/photo-..."

# Combine with other updates
notion-cli page update <page-id> --title "New Title" --icon üìö --cover "https://..."

# Remove icon or cover
notion-cli page update <page-id> --icon none
notion-cli page update <page-id> --cover none
```

Example:

```
$ notion-cli page update d4e5f6a7-... -s "Status:select:Resolved" --icon ‚úÖ
Page updated.
  Title: Mars Shipping Promise Incident
  ID: d4e5f6a7-...
  Icon: ‚úÖ
  URL: https://www.notion.so/Mars-Shipping-Promise-Incident-d4e5f6a7...
```

#### page archive

Archive (soft-delete) a page:

```bash
notion-cli page archive <page-id>
```

The page can be restored later from the Notion UI.

Example:

```
$ notion-cli page archive d9e0f1a2-b3c4-5678-defa-890123456789
Page archived.
  ID: d9e0f1a2-b3c4-5678-defa-890123456789
  Archived: true
```

#### page property

Retrieve a single property value from a page:

```bash
notion-cli page property <page-id> <property-id>

# Use the property name "title" as a shorthand
notion-cli page property <page-id> title
```

Useful for paginated properties (rollups, relations with many entries, long rich text) where the full value isn't returned by `page get`. Property IDs can be found in `page get --raw` or `database get --raw` output.

Example:

```
$ notion-cli page property d4e5f6a7-b8c9-0123-defa-234567890123 title
Type: property_item
Items: 1
  AI Pilot Retrospective
```

#### page move

Move a page to a new parent:

```bash
notion-cli page move <page-id> --parent <new-parent-page-id>
```

The page keeps its content and properties ‚Äî only the parent changes.

Example:

```
$ notion-cli page move d9e0f1a2-b3c4-5678-defa-890123456789 --parent a1b2c3d4-5e6f-7890-abcd-ef1234567890
Page moved.
  Title: Lessons Learned
  ID: d9e0f1a2-b3c4-5678-defa-890123456789
  New parent: a1b2c3d4-5e6f-7890-abcd-ef1234567890
  URL: https://www.notion.so/Lessons-Learned-d9e0f1a2b3c45678defa890123456789
```

### database

View and query Notion databases.

#### database get

View a database's metadata and schema:

```bash
notion-cli database get <database-id>
```

Shows the database title, ID, parent, dates, URL, data sources, and schema (property names and types). Use the data source ID from the output to query entries with `datasource query`.

Example:

```
$ notion-cli database get a6b7c8d9-e0f1-2345-abcd-567890123456
üóÉÔ∏è Fetching database...

Title: AI Incident Log
ID: a6b7c8d9-e0f1-2345-abcd-567890123456
Parent: page (ID: a1b2c3d4-5e6f-7890-abcd-ef1234567890)
Created: 9/5/2025
Last edited: 2/10/2026
URL: https://www.notion.so/a6b7c8d9e0f12345abcd567890123456

Data sources (1):
  AI Incident Log ‚Äî ID: b7c8d9e0-f1a2-3456-bcde-aaaaaaaaaaaa

Schema (6 properties):
  Date: date
  Severity: select
  Status: select
  Blamed On: rich_text
  Resolution: rich_text
  Name: title

To query entries: notion-cli datasource query b7c8d9e0-f1a2-3456-bcde-aaaaaaaaaaaa
To view schema:   notion-cli datasource get b7c8d9e0-f1a2-3456-bcde-aaaaaaaaaaaa
```

#### database create

Create a new inline database as a child of a page:

```bash
notion-cli database create <parent-page-id> --title "Task Tracker"
```

The database is created with a single "Name" title property. Use `database update` to modify properties after creation.

Example:

```
$ notion-cli database create d4e5f6a7-b8c9-0123-defa-234567890123 --title "AI Approved Use Cases"
Database created.
  Title: AI Approved Use Cases
  ID: e0f1a2b3-c4d5-6789-efab-901234567890
  URL: https://www.notion.so/e0f1a2b3c4d56789efab901234567890
```

#### database update

Update a database's title or description:

```bash
notion-cli database update <database-id> --title "New Title"

# Update description
notion-cli database update <database-id> --description "Updated description"

# Update both
notion-cli database update <database-id> --title "New" --description "Desc"
```

Only the specified fields are updated; others remain unchanged.

Example:

```
$ notion-cli database update e0f1a2b3-c4d5-6789-efab-901234567890 --title "AI Approved Use Cases ‚Äî Revised"
Database updated.
  Title: AI Approved Use Cases ‚Äî Revised
  ID: e0f1a2b3-c4d5-6789-efab-901234567890
  URL: https://www.notion.so/e0f1a2b3c4d56789efab901234567890
```

### datasource

Work with data sources directly. In Notion's data model, databases contain one or more data sources, and data sources contain pages (entries). The `database` commands work at the database level; `datasource` commands give direct access to the data source layer underneath.

Data source IDs are shown in the output of `database get`.

#### datasource get

Retrieve a data source by ID:

```bash
notion-cli datasource get <datasource-id>
```

Shows the data source title, ID, parent database, schema, and a hint to query its entries.

#### datasource query

Query entries from a data source:

```bash
notion-cli datasource query <datasource-id>

# Limit results
notion-cli datasource query <datasource-id> --limit 50

# Paginate
notion-cli datasource query <datasource-id> --cursor <cursor>
```

Returns entries with titles, IDs, property values, and URLs.

#### datasource create

Create a new data source in a database:

```bash
notion-cli datasource create <database-id> --title "Q1 Data"
```

#### datasource update

Update a data source's title and/or schema properties:

```bash
notion-cli datasource update <datasource-id> --title "New Title"
```

Add schema properties (columns) with `--add-property` (`-p`):

```bash
# Add typed columns
notion-cli datasource update <datasource-id> -p "Blamed On:rich_text" -p "Cost:number"

# For select/multi_select, pre-populate options after a second colon
notion-cli datasource update <datasource-id> -p "Severity:select:Low,Medium,High,Critical"
```

Supported property types: `rich_text`, `number`, `select`, `multi_select`, `date`, `checkbox`, `url`, `email`, `phone_number`, `status`, `people`, `files`, `created_time`, `created_by`, `last_edited_time`, `last_edited_by`.

Remove properties with `--remove-property`:

```bash
notion-cli datasource update <datasource-id> --remove-property "Old Column"
```

Example:

```
$ notion-cli datasource update b7c8d9e0-... -p "Blamed On:rich_text" -p "Cost:number" -p "Severity:select:Low,Medium,High,Critical"
Data source updated.
  Title: AI Incident Log
  ID: b7c8d9e0-...
  Schema (6 properties):
    Date: date
    Severity: select
    Cost: number
    Blamed On: rich_text
    Resolution: rich_text
    Name: title
```

> **Note:** In the Notion API (2025-09-03), schema properties live on data sources, not databases. Use `datasource update` to manage columns ‚Äî `database update` only handles title and description.

#### datasource templates

List available page templates for a data source:

```bash
notion-cli datasource templates <datasource-id>
```

Templates are pages that serve as blueprints for new entries in the data source.

### block

Read and manage individual content blocks.

#### block get

Retrieve a single block by ID:

```bash
notion-cli block get <block-id>
```

Shows the block type, content, parent, dates, and whether it has children. Pages are also blocks, so you can pass a page ID.

Example:

```
$ notion-cli block get f1a2b3c4-d5e6-7890-fabc-012345678901
ID: f1a2b3c4-d5e6-7890-fabc-012345678901
Type: paragraph
Parent: page (ID: d4e5f6a7-b8c9-0123-defa-234567890123)
Has children: false
Archived: false
Created: 2/12/2026
Last edited: 2/12/2026

Content:
  The AI pilot went mostly well. Marketing loved the generated content. Legal has questions. The chatbot told three customers we offer free shipping to Mars.
```

#### block children

List the immediate children of a block or page:

```bash
notion-cli block children <block-id>

# Also works with page IDs
notion-cli block children <page-id>

# Limit results
notion-cli block children <block-id> -n 10
```

Unlike `page get`, this does not recurse into nested blocks ‚Äî it returns only the direct children.

Example:

```
$ notion-cli block children d4e5f6a7-b8c9-0123-defa-234567890123
Found 2 block(s):

  The AI pilot went mostly well. Marketing loved the generated content. Legal has questions. The chatbot told three customers we offer free shipping to Mars.
  Action item: add guardrails before the next demo with the board. Seriously.
```

#### block append

Append blocks to a page or block:

```bash
# Default: append a paragraph
notion-cli block append <page-id> "Hello, world!"

# Specify block type
notion-cli block append <page-id> "Section Title" --type heading_2 --color purple

# Callout with emoji icon and background color
notion-cli block append <page-id> "Important note!" --type callout --icon üî• --color red_background

# Code block with language
notion-cli block append <page-id> "console.log('hi')" --type code --language javascript

# Blocks that need no text
notion-cli block append <page-id> --type divider
notion-cli block append <page-id> --type table_of_contents --color gray_background

# Bookmark (text is the URL)
notion-cli block append <page-id> "https://example.com" --type bookmark

# To-do items
notion-cli block append <page-id> "Buy milk" --type to_do
notion-cli block append <page-id> "Already done" --type to_do --checked

# List items
notion-cli block append <page-id> "First point" --type bulleted_list_item
notion-cli block append <page-id> "Step one" --type numbered_list_item
```

Supported block types: `paragraph` (default), `heading_1`, `heading_2`, `heading_3`, `callout`, `quote`, `divider`, `code`, `bookmark`, `to_do`, `bulleted_list_item`, `numbered_list_item`, `table_of_contents`.

Type-specific options:

| Option | Applies to | Example |
|--------|-----------|---------|
| `--color <color>` | All types with text | `--color blue`, `--color yellow_background` |
| `--icon <emoji>` | `callout` | `--icon üé∏` |
| `--language <lang>` | `code` | `--language python` |
| `--checked` | `to_do` | `--checked` |

For complex structures (tables, toggles with children, columns, multi-block appends), use `--json` to pass raw Notion block JSON:

```bash
# Single block as JSON
notion-cli block append <page-id> --json '{"type":"callout","callout":{"rich_text":[{"type":"text","text":{"content":"Rich!"}}],"icon":{"emoji":"üéØ"},"color":"green_background"}}'

# Multiple blocks in one request (up to 100)
notion-cli block append <page-id> --json '[{"type":"divider","divider":{}},{"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"Bold!"},"annotations":{"bold":true}}]}}]'

# Read from stdin
cat blocks.json | notion-cli block append <page-id> --json -
```

Examples:

```
$ notion-cli block append d4e5f6a7-... "Section Title" --type heading_2 --color blue
Appended 1 block(s).
  ## Section Title

$ notion-cli block append d4e5f6a7-... "Warning!" --type callout --icon ‚ö†Ô∏è --color yellow_background
Appended 1 block(s).
  ‚ö†Ô∏è Warning!

$ notion-cli block append d4e5f6a7-... --type divider
Appended 1 block(s).
  ---
```

#### block update

Update a block's text content and/or color:

```bash
# Update text
notion-cli block update <block-id> "Updated text"

# Update color only (preserves existing text)
notion-cli block update <block-id> --color red_background

# Update both
notion-cli block update <block-id> "Updated text" --color purple
```

Works with paragraph, heading, bulleted list item, numbered list item, to-do, toggle, callout, and quote blocks. The command retrieves the block first to determine its type, then sends the update with the correct type key. Color-only updates preserve the existing text content.

Example:

```
$ notion-cli block update a2b3c4d5-... "The chatbot no longer makes promises about interplanetary logistics."
Block updated.
  ID: a2b3c4d5-...
  Type: paragraph
  Content: The chatbot no longer makes promises about interplanetary logistics.

$ notion-cli block update a2b3c4d5-... --color blue_background
Block updated.
  ID: a2b3c4d5-...
  Type: paragraph
  Content: The chatbot no longer makes promises about interplanetary logistics.
```

#### block delete

Delete (archive) a block:

```bash
notion-cli block delete <block-id>
```

The block can be restored via the Notion UI or by updating it with `archived: false`.

Example:

```
$ notion-cli block delete a2b3c4d5-e6f7-8901-abcd-123456789012
Block deleted.
  ID: a2b3c4d5-e6f7-8901-abcd-123456789012
  Type: paragraph
  Archived: true
```

### comment

Read and manage comments on pages and blocks.

> **Limitations:** The Notion API only returns **unresolved** comments ‚Äî if a comment is resolved in the Notion UI, it won't appear in `comment list`. The API also cannot start new inline discussion threads on blocks; `comment add` creates top-level page comments only, and `comment reply` can respond to existing inline threads.
>
> **Requirements:** Both "Read comments" and "Insert comments" capabilities must be enabled in the [Notion integration dashboard](https://www.notion.so/profile/integrations) ‚Äî they are off by default.

#### comment list

List comments on a page or block:

```bash
notion-cli comment list <page-id>
```

Comments show their text, ID, discussion thread ID, author, and creation date. Comments with the same discussion ID are part of the same thread.

Example:

```
$ notion-cli comment list d4e5f6a7-b8c9-0123-defa-234567890123
Found 1 comment(s):

  üí¨ Can we not demo this to the board until the Mars shipping issue is fixed?
     ID: b3c4d5e6-f7a8-9012-bcde-234567890123
     Discussion: c4d5e6f7-a8b9-0123-cdef-345678901234
     Author: a8b9c0d1-e2f3-4567-abcd-789012345678
     Created: 2/12/2026
```

#### comment get

Retrieve a single comment by ID:

```bash
notion-cli comment get <comment-id>
```

Shows the comment text, ID, discussion thread ID, author, and creation date. Comment IDs can be found in the output of `comment list`.

Example:

```
$ notion-cli comment get b3c4d5e6-f7a8-9012-bcde-234567890123
üí¨ Can we not demo this to the board until the Mars shipping issue is fixed?
  ID: b3c4d5e6-f7a8-9012-bcde-234567890123
  Discussion: c4d5e6f7-a8b9-0123-cdef-345678901234
  Author: a8b9c0d1-e2f3-4567-abcd-789012345678
  Created: 2/12/2026
```

#### comment add

Add a comment to a page:

```bash
notion-cli comment add <page-id> "This looks great!"
```

Creates a new top-level comment thread on the page.

Example:

```
$ notion-cli comment add d4e5f6a7-b8c9-0123-defa-234567890123 "Fixed. It now only promises free shipping to the Moon."
Comment added.
  ID: e6f7a8b9-c0d1-2345-efab-567890123456
  Discussion: c4d5e6f7-a8b9-0123-cdef-345678901234
  Created: 2/12/2026
```

#### comment reply

Reply to an existing comment thread:

```bash
notion-cli comment reply <discussion-id> "I agree!"
```

The discussion ID can be found in the output of `comment list`, or from the Notion UI by clicking "Copy link to discussion" on a comment thread ‚Äî the `d` query parameter in the copied URL is the discussion ID.

Example:

```
$ notion-cli comment reply c4d5e6f7-a8b9-0123-cdef-345678901234 "Good enough. Ship it."
Reply added.
  ID: d5e6f7a8-b9c0-1234-defa-456789012345
  Discussion: c4d5e6f7-a8b9-0123-cdef-345678901234
  Created: 2/12/2026
```

### file

Upload and manage files.

#### file upload

Upload a local file to Notion:

```bash
notion-cli file upload ./report.pdf
```

Handles the full upload workflow in one command: creates an upload slot, sends the file data as multipart/form-data, and reports the result. The resulting file upload ID can be used to attach the file to a page or block via the API.

Example:

```
$ notion-cli file upload ./report.pdf
üìé Uploading report.pdf (2048576 bytes)...

File uploaded.
  Filename: report.pdf
  ID: a1b2c3d4-e5f6-7890-abcd-ef1234567890
  Content type: application/pdf
  Size: 2048576 bytes
  Status: uploaded
  Created: 2/13/2026
```

#### file list

List file uploads:

```bash
notion-cli file list

# Limit results
notion-cli file list --limit 50
```

Shows each file's name, ID, content type, size, status, and creation date.

#### file get

Retrieve a file upload by ID:

```bash
notion-cli file get <file-id>
```

### auth-internal

Manage internal integration tokens.

```bash
# Save your integration token (prompts with masked input)
notion-cli auth-internal set

# Pass the token directly
notion-cli auth-internal set <token>

# Check if a token is configured
notion-cli auth-internal status

# Remove the stored token
notion-cli auth-internal clear
```

### auth-public

Authenticate with a public integration using OAuth.

```bash
# Save your OAuth client ID and secret (prompted, masked)
notion-cli auth-public setup

# Run the OAuth browser flow
notion-cli auth-public login

# Print the authorization URL instead of opening the browser
notion-cli auth-public login --no-browser

# Check OAuth authentication state
notion-cli auth-public status
```

#### auth-public introspect

Inspect a token's metadata:

```bash
notion-cli auth-public introspect <token>
```

Shows whether the token is active, along with bot ID, workspace ID, and expiry information.

#### auth-public revoke

Revoke an access token:

```bash
notion-cli auth-public revoke <token>
```

### user

View Notion users and bot info.

#### user me

Show the bot user for your integration token:

```bash
notion-cli user me
```

Example:

```
$ notion-cli user me
Name: my-notion-bot
ID: a8b9c0d1-e2f3-4567-abcd-789012345678
Type: bot
Workspace: Acme Corp
Owner: workspace
```

#### user get

Retrieve a user by ID:

```bash
notion-cli user get <user-id>
```

Shows the user's name, ID, type (person or bot), and type-specific details (email for people, workspace and owner info for bots).

Example:

```
$ notion-cli user get f7a8b9c0-d1e2-3456-fabc-678901234567
Name: Alice Chen
ID: f7a8b9c0-d1e2-3456-fabc-678901234567
Type: person
Email: alice@example.com
```

#### user list

List all users in the workspace:

```bash
notion-cli user list

# Limit results
notion-cli user list -n 10

# Paginate
notion-cli user list --cursor <cursor>
```

Returns all people and bots in the workspace with their names, IDs, types, emails, and workspace/owner details.

Example:

```
$ notion-cli user list
Found 2 user(s):

  üë§ Alice Chen
     ID: f7a8b9c0-d1e2-3456-fabc-678901234567
     Type: person
     Email: alice@example.com

  ü§ñ my-notion-bot
     ID: a8b9c0d1-e2f3-4567-abcd-789012345678
     Type: bot
     Workspace: Acme Corp
     Owner: workspace
```

### docs

Show guides and workflows for using the CLI:

```bash
notion-cli docs
```

Covers setup, workspace mapping, output/performance notes, and agent usage tips. This is the content that would clutter `--help` ‚Äî run it once to understand the high-level flows.

## Example workflow: mapping a workspace

The Notion API doesn't have a "list all pages" endpoint, so mapping a workspace starts by finding the root pages the integration can access, then recursively reading child pages.

```bash
# 1. Find root pages
notion-cli integration pages

# 2. Read a page to discover its children
notion-cli page get <page-id>

# 3. View a database's schema
notion-cli database get <database-id>

# 4. Read an entry or child page
notion-cli page get <page-id>
```

For AI agents: run `notion-cli docs` for the full workspace mapping workflow and usage guides. Each subcommand also has its own `--help` with detailed usage.

## Development

If you want to modify the CLI, use `npm run cli` during development to run from source without rebuilding:

```bash
npm run cli -- integration pages
npm run cli -- page get <page-id>
```

After making changes, rebuild with `npm run build` to update the linked `notion-cli` command.

## Testing

Integration tests call each CLI command against a real Notion workspace to verify end-to-end behavior: argument parsing, API calls, and output formatting.

```bash
# Run all test suites (concurrent ‚Äî ~20s)
npm test

# Run a single suite
npm run test:page
npm run test:database
npm run test:datasource
npm run test:block
npm run test:comment
npm run test:file
npm run test:search
npm run test:user
npm run test:docs
npm run test:integration

# Auth tests (config management + OAuth API tests when credentials are set)
npm run test:auth
```

The tests pick up the token stored by `notion-cli auth-internal set` or `notion-cli auth-public login` (in `~/.notion-cli/config.json`), so if you've already authenticated there's nothing extra to configure. You can also set the `NOTION_TOKEN` environment variable, which takes precedence. If no token is found, each suite skips cleanly.

Tests are split into independent files ‚Äî each suite creates its own test resources and cleans up afterward. Suites run concurrently when using `npm test`, or individually for faster iteration during development.

**What's covered:**

| Suite | Commands tested | Variations |
|-------|----------------|------------|
| `test:docs` | `docs` | prints guide content |
| `test:user` | `user me`, `user list`, `user get` | `--raw`, ID chaining |
| `test:search` | `search` | default pages, `--filter database`, `--filter all`, with query, `--limit`, `--direction` |
| `test:page` | `page get`, `page property`, `page update`, `page create`, `page archive`, `page move` | formatted + `--raw`, create/archive lifecycle, move between parents, `--set` typed properties, `--icon` emoji, `--cover` external URL, icon/cover removal |
| `test:block` | `block get`, `block children`, `block append`, `block update`, `block delete` | formatted + `--raw`, full CRUD lifecycle, `--type` (13 block types), `--color`, `--icon`, `--language`, `--checked`, `--json` (single, array, stdin), `block update --color`, error validation |
| `test:comment` | `comment add`, `comment list`, `comment get`, `comment reply` | formatted + `--raw`, thread verification |
| `test:database` | `database create`, `database update`, `database get` | `--raw`, data sources, full CRUD lifecycle |
| `test:datasource` | `datasource get`, `datasource query`, `datasource update`, `datasource templates` | formatted + `--raw`, pagination, `--add-property`, `--remove-property` |
| `test:file` | `file upload`, `file list`, `file get` | formatted + `--raw`, full upload lifecycle |
| `test:integration` | `integration pages` | formatted output |
| `test:auth` | `auth-internal` set/status/clear, `auth-public` status/login/introspect/revoke | config management (isolated HOME), OAuth API tests (env var gated) |

**Requirements:**
- A valid Notion integration token (via `auth-internal set`, `auth-public login`, or env var)
- The integration must have access to at least one workspace page
- The integration needs "Read content" and "Insert content" capabilities
- For OAuth tests: `NOTION_OAUTH_CLIENT_ID` and `NOTION_OAUTH_CLIENT_SECRET` env vars

Each suite is self-contained ‚Äî it creates a test page during setup (if needed), runs tests against it, and archives it during teardown. No pre-existing workspace content is required beyond the integration being connected to at least one page.

## Troubleshooting

### "No Notion API key found"

Run `notion-cli auth-internal set` or `notion-cli auth-public login` to authenticate. You can also set the `NOTION_TOKEN` environment variable.

### "Unauthorized" or "Forbidden" errors

- Verify your integration token is correct
- Make sure pages are shared with your integration

### No pages found

Your integration can only see pages explicitly shared with it. Share a top-level page to access its children.

## License

[MIT](LICENSE)
